<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Shuttle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: rgb(30, 110, 233);
    }

    .search-results-container {
      background-color: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 400px;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    input, select {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      display: block;
      width: 100%;
      padding: 0.75rem;
      background-color: rgb(30, 110, 233);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
	
	#search-info-container {
	  display: flex;
	  flex-direction: column;
	  gap: 10px;
	}

	.search-info-item {
	  display: flex;
	  align-items: center;
	  font-size: 48px;
	  font-weight: bold;
	  color: rgb(30, 110, 233);
	}

	.search-info-item label {
	  font-weight: bold;
	  color: black
	}
	table {
	  margin: 0 auto;
	  text-align: left;

	th, td {
	  padding: 8px;	
	  text-align: left;
	  border-bottom: 1px solid #ddd;
	}
  </style>
</head>
<body>
  <div class="search-results-container">
    <h1>Select Shuttle</h1>
	<div id="search-info-container">
	  <div class="search-info-item">
	  <table><tr>
	  <th>

		<span id="pickup-location">N/A</span>
		</th>
	  </div>
	  <th><label> - </label></th>
	  <th>
	  <div class="search-info-item">

		<span id="dropoff-location">N/A</span>
	  </th></tr></table>
	  </div>
	</div>
	
	<div id="details">
	<label>Frequency: </label>
	<span id="frequency-days">N/A</span>
	<span id="frequency-minutes">N/A</span>
	</div>
	
    

	
  </div>

<script>
  
    // Retrieve the query parameters
    const urlParams = new URLSearchParams(window.location.search);
    const pickupLocation = urlParams.get('pickup');
    const dropoffLocation = urlParams.get('dropoff');


    // Display the search information
	const pickupLocationElement = document.getElementById('pickup-location');
	const dropoffLocationElement = document.getElementById('dropoff-location');

	pickupLocationElement.textContent = pickupLocation || 'N/A';
	dropoffLocationElement.textContent = dropoffLocation || 'N/A';
	
</script>
<script type="module">
  import { getRoutes } from './routes.js';

async function displayFrequencyDetails() {
  const routes = await getRoutes();

  // Get the pickup and dropoff locations from the HTML
  const pickupLocationElement = document.getElementById('pickup-location');
  const dropoffLocationElement = document.getElementById('dropoff-location');
  const pickupLocation = pickupLocationElement.textContent;
  const dropoffLocation = dropoffLocationElement.textContent;

  const frequencyDaysElement = document.getElementById('frequency-days');
  const frequencyMinutesElement = document.getElementById('frequency-minutes');

  let foundMatch = false;
  routes.forEach(route => {
    if (route.From === pickupLocation && route.To === dropoffLocation) {
      foundMatch = true;
      frequencyDaysElement.textContent = `${route.departureFrequency.days}, `;
      frequencyMinutesElement.textContent = `${route.departureFrequency.minutes}`;
    }
  });

  if (!foundMatch) {
    frequencyDaysElement.textContent = 'N/A';
    frequencyMinutesElement.textContent = 'N/A';
  }
}

  displayFrequencyDetails();
</script>
</body>
</html>
